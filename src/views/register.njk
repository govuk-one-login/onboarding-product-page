{% extends "base.njk" %}
{% from "macros/breadcrumbs.njk" import breadcrumbs %}
{% import "macros/form-inputs.njk" as inputs with context %}
{% from "govuk/components/radios/macro.njk" import govukRadios %}
{% from "govuk/components/button/macro.njk" import govukButton %}

{% set pageTitle = "Sign up to get access" %}
{% set breadcrumbs = breadcrumbs([{text: "Get started", href: "/getting-started"}], pageTitle) %}

{% block mainContent %}
  {% if errorMessages.size != 0 %}
    <div class="govuk-error-summary" aria-labelledby="error-summary-title" role="alert" tabindex="-1"
         data-module="govuk-error-summary">
      <h2 class="govuk-error-summary__title" id="error-summary-title">
        There is a problem
      </h2>
      <div class="govuk-error-summary__body">
        <ul class="govuk-list govuk-error-summary__list">
          {% for field in fieldOrder %}
            {% if errorMessages.get(field) %}
              <li>
                <a href="#{{ field }}">{{ errorMessages.get(field) }}</a>
              </li>
            {% endif %}
          {% endfor %}
        </ul>
      </div>
    </div>
  {% endif %}

  <h1 class="govuk-heading-l">Sign up to get access</h1>
  <p class="govuk-body">Complete this form if you’re from a central government service team and want to try out GOV.UK
    Sign In.</p>
  <p class="govuk-body">Once you’ve submitted it, we’ll get in touch to learn more about your service and give you
    access to our test environment (or ‘sandbox’).</p>

  <form class="form" method="post" novalidate="novalidate">
    {{ inputs.textInput("Name", "name", "govuk-!-width-two-thirds") }}
    {{ inputs.textInput("Organisation name", "organisation-name", "govuk-!-width-two-thirds") }}
    {{ inputs.emailInput("Contact email") }}
    {{ inputs.textInput("Service name", "service-name", "govuk-!-width-full") }}

    {{ govukRadios({
      name: "mailing-list",
      attributes: {
        id: "mailing-list"
      },
      fieldset: {
        legend: {
          text: "Would you like to join our mailing list?"
        }
      },
      hint: {
        text: "You’ll get occasional email updates about our work and invitations to our cross-government show and tells."
      },
      items: [
        {
          text: "Yes",
          value: "yes",
          id: "mailing-list-yes"
        },
        {
          text: "No",
          value: "no",
          id: "mailing-list-no"
        }
      ],
      errorMessage: {
        text: errorMessages.get("mailing-list")
      } if errorMessages and errorMessages.has("mailing-list")
    }) }}

    {{ govukButton({
      text: "Submit",
      name: "submit",
      attributes: {
        id: "submit"
      }
    }) }}
  </form>
{% endblock %}
